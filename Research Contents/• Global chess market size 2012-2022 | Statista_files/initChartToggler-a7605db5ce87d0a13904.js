webpackJsonp([21],{1740:function(t,a,e){"use strict";function s(){document.querySelectorAll("[data-chart-change-to]").forEach(function(t){t.addEventListener("click",function(t){var a=t.currentTarget.dataset.chartChangeTo;"table"===a?(Object(o.d)(),Object(o.a)(),r.a.commit("DISABLE_CHART_DOWNLOADS")):(r.a.state.chartInitialized||Object(n.a)(function(t){r.a.state.chartGlobals.displayType=a,r.a.commit("ENABLE_CHART_DOWNLOADS"),t.resetDataPointsToAuto(),t.changeChartType(a)}),Object(o.c)(),Object(o.b)())}),l&&"table"===t.dataset.chartChangeTo&&t.click()})}Object.defineProperty(a,"__esModule",{value:!0}),e.d(a,"initChartToggler",function(){return s});var i=e(9),n=e(1771),o=e(1812),r=e(350),l=Object(i.a)()},1771:function(t,a,e){"use strict";function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};e.e(162).then(e.bind(null,1811)).then(function(a){var e=a.Highcharts,s=l.a.state.chartOptions;e.setOptions(l.a.state.chartGlobals);var n=Object(c.a)(s);n.plotOptions.series.events={click:i},d&&(n.chart.type="bar"),b=new e.Chart(n);var o=new h.a(b,n,u,l.a.state.chartGlobals,p);l.a.commit("SET_CHART_MANAGER",o),l.a.commit("SET_CHART_INITIALIZED",!0),Object(r.initReadingAid)(),t(o)})}function i(t){if("manual"===l.a.state.chartDataLabelsSetting){var a=t.point.x;void 0===l.a.state.chartDataLabels[a]&&l.a.commit("SET_CHART_DATA_LABEL",{key:a,enabled:b.series[0].options.dataLabels.enabled});for(var e=0;e<b.series.length;e++){if(b.series[e].data[a].update({dataLabels:{enabled:!l.a.state.chartDataLabels[a]}},!1),e===b.series.length-1){var s=!l.a.state.chartDataLabels[a];l.a.commit("SET_CHART_DATA_LABEL",{key:a,enabled:s})}}b.redraw()}}e.d(a,"a",function(){return s});var n=e(11),o=e(9),r=e(141),l=e(350),c=e(1772),h=e(1773),d=Object(o.a)(),p=document.querySelector("[data-statistic-id]").dataset.statisticId,u=JSON.parse(Object(n.a)("chart-vars","exportOptions")),b=null},1772:function(t,a,e){"use strict";function s(t){if("area"===t.chart.type&&(t.plotOptions.area.marker.enabled=!1),"column"===t.chart.type)"dataLabels"in t.plotOptions.column?t.plotOptions.column.dataLabels.allowOverlap=!0:t.plotOptions.column.dataLabels={allowOverlap:!0},"style"in t.xAxis.labels?t.xAxis.labels.style.textOverflow="none":t.xAxis.labels.style={textOverflow:"none"};else if("bar"===t.chart.type){if(t.xAxis.labels.useHTML=!1,"normal"!==t.plotOptions.series.stacking){for(var a=0;a<t.series.length;a++)t.series[a].index=t.series.length-a,t.series[a].legendIndex=a;"dataLabels"in t.plotOptions.bar?t.plotOptions.bar.dataLabels.allowOverlap=!0:t.plotOptions.bar.dataLabels={allowOverlap:!0}}else{for(var e=0;e<t.series.length;e++)t.series[e].index=e,t.series[e].legendIndex=t.series.length-e;t.legend.reversed=!0}"style"in t.xAxis.labels?(t.xAxis.labels.style["text-overflow"]="none",t.xAxis.labels.style.lineHeight=""):t.xAxis.labels.style={"text-overflow":"none"}}return t.tooltip.headerFormat=t.tooltip.headerFormat.replace("max-width:550px;",""),t.tooltip.padding=4,t.tooltip.snap=0,1===t.series.length&&(t.tooltip.pointFormat='<tr><td align="center" colspan="2" style="font-weight:bold;padding:3px 8px 3px 8px;"><span style="font-weight:bold;font-size:16px;color:{series.color}">&bull;</span>&nbsp;{point.y}</td></tr>'),t.tooltip.backgroundColor="rgba(255,255,255,1)",t.tooltip.padding=1,t.chart.events.selection=function(t){t.xAxis?i.a.commit("SET_IS_ZOOMED_IN",!0):i.a.commit("SET_IS_ZOOMED_IN",!1)},"area"===t.chart.type&&(t.chart.animation=!1),t}e.d(a,"a",function(){return s});var i=e(350)},1773:function(t,a,e){"use strict";e.d(a,"a",function(){return d});var s=e(4),i=e.n(s),n=e(5),o=e.n(n),r=e(10),l=e.n(r),c=e(350),h=e(14),d=function(){function t(a,e,s,n,o){i()(this,t),this.chart=a,this.chartOptions=e,this.exportOptions=s,this.chartGlobals=n,this.originalDisplayType=n.displayType,this.statisticId=o}return o()(t,[{key:"currentChartIsUnchanged",value:function(){if("table"===this.chartGlobals.displayType)return!0;var t=this.chartGlobals.isStaasUser,a=this.chartGlobals.hasCustomPngFooter,e=this.chartGlobals.hasCustomColors,s=this.privateChartLegendIsUnchanged(),i=c.a.state.chartDataLabelsSettingDefault===c.a.state.chartDataLabelsSetting&&!1===c.a.state.chartIsRotated,n=c.a.state.isZoomedIn;return this.originalDisplayType===this.chartGlobals.displayType&&!1===t&&!1===a&&!1===e&&!0===s&&!0===i&&!1===n}},{key:"privateChartLegendIsUnchanged",value:function(){var t=!0;try{this.chart.series.forEach(function(a){a.points.forEach(function(a){!1===a.dataLabels.enabled&&(t=!1)})})}catch(a){t=!0}return t}},{key:"exportChart",value:function(t,a){var e=JSON.parse(JSON.stringify(this.exportOptions));e.subtitle.y=48,"png"===a||"jpeg"===a?(this.chart.exportChart({type:"image/png",sourceWidth:754,sourceHeight:this.chart.chartHeight+110,width:1e3,filename:t},e),this._logStatisticDownload(a,this.statisticId)):"pdf"===a&&(this.chart.exportChart({isStandard:this.chart.series[0].type===this.chartGlobals.displayType,type:"application/pdf",sourceWidth:754,sourceHeight:this.chart.chartHeight+110,width:1e3,filename:t},e),this._logStatisticDownload(a,this.statisticId))}},{key:"switchDatalabels",value:function(a){var e=this.chartOptions.plotOptions.series.dataLabels.enabled;a===t.DATA_POINTS_AUTO?(c.a.commit("SET_CHART_DATA_LABEL_SETTING",t.DATA_POINTS_AUTO),this.updateDatalabels(e)):a===t.DATA_POINTS_ALL?(c.a.commit("SET_CHART_DATA_LABEL_SETTING",t.DATA_POINTS_ALL),this.updateDatalabels(!0)):a===t.DATA_POINTS_NONE?(c.a.commit("SET_CHART_DATA_LABEL_SETTING",t.DATA_POINTS_NONE),this.updateDatalabels(!1)):a===t.DATA_POINTS_MANUAL&&c.a.commit("SET_CHART_DATA_LABEL_SETTING",t.DATA_POINTS_MANUAL)}},{key:"updateOptions",value:function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];!1===a&&(this.chart.series[0].isDirty=!0),this.chart.series.forEach(function(s){var i=Object(h.b)(s.options,t);s.update(i,a),e&&s.data.forEach(function(e){!1===a&&(e.isDirty=!0);var s=Object(h.b)(e.options,t);e.update(s,a)})}),!1===a&&this.chart.redraw()}},{key:"updateDatalabels",value:function(t){this.chart.series.forEach(function(a){a.options.dataLabels?a.options.dataLabels.enabled=t:a.options.dataLabels={enabled:t},a.isDirty=!0,a.data.forEach(function(a){a.isDirty=!0,a.options.dataLabels?a.options.dataLabels.enabled=t:a.options.dataLabels={enabled:t},a.update({dataLabels:{enabled:t}},!1)})}),this.chart.redraw()}},{key:"changeChartType",value:function(t){this.chartType=t;var a=this.chartOptions.plotOptions.series.stacking;"line"===t?a=null:"area"===t&&(a=this.chartOptions.plotOptions.area.stacking);var e=c.a.state.initialChartTypes;t===c.a.state.chartTypes.combined&&e.length===this.chart.series.length?this.chart.series.forEach(function(t,a){t.update({type:e[a]},!0)}):this.chart.series.forEach(function(e){e.update({type:t},!0),e.update({stacking:a},!0)})}},{key:"rotateDataLabels",value:function(t){if(t)this.updateOptions({dataLabels:{rotation:-90,x:3,y:"line"===this.chart.type?-10:-5,align:"left"}},!1),c.a.state.chartIsRotated=!0;else{var a="undefined"!==this.chart.series[0]?this.chart.series[0].options.dataLabels.x:"",e="undefined"!==this.chart.series[0]?this.chart.series[0].options.dataLabels.y:"";this.updateOptions({dataLabels:{rotation:0,x:a,y:e,align:"center"}},!1),c.a.state.chartIsRotated=!1}}},{key:"downloadStatistic",value:function(t){var a=this.currentChartIsUnchanged(),e=this.chartOptions.exporting.filename;"jpeg"===t&&(t="png"),["pdf","png","jpeg"].includes(t)?c.a.state.userCanDownload[t]&&"table"!==this.chartGlobals.displayType&&(this._downloadExists(t)&&a?window.location.assign(this.chartGlobals.download[t]):this.exportChart(e,t)):["xlsx","pptx"].includes(t)?this._downloadExists(t)&&window.location.assign(this.chartGlobals.download[t]):console.warn("Unsupported download type: ",t)}},{key:"resetDataPointsToAuto",value:function(){this.switchDatalabels(this.DATA_POINTS_AUTO)}},{key:"_logStatisticDownload",value:function(t,a){l.a.get("/logGenerateHighchart/".concat(a,"/").concat(t)).then(function(t){return console.log(t.data)}).catch(function(t){return console.log(t)})}},{key:"_downloadExists",value:function(t){return void 0!==this.chartGlobals.download[t]&&null!==this.chartGlobals.download[t]&&this.chartGlobals.download[t].length>0}}],[{key:"DATA_POINTS_ALL",get:function(){return"all"}},{key:"DATA_POINTS_AUTO",get:function(){return"auto"}},{key:"DATA_POINTS_NONE",get:function(){return"none"}},{key:"DATA_POINTS_MANUAL",get:function(){return"manual"}}]),t}()},1812:function(t,a,e){"use strict";function s(){document.querySelector(r).classList.remove(c)}function i(){document.querySelector(r).classList.add(c)}function n(){document.querySelectorAll(l).forEach(function(t){t.classList.add(c),t.classList.remove(h)})}function o(){document.querySelectorAll(l).forEach(function(t){t.classList.remove(c),t.classList.add(h)})}e.d(a,"c",function(){return s}),e.d(a,"a",function(){return i}),e.d(a,"b",function(){return n}),e.d(a,"d",function(){return o});var r="[data-statistic-chart]",l="#tableContainer",c="hide",h="display-block"}});